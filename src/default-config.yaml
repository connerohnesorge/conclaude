# Conclaude Configuration Template
#
# This is a minimal example configuration file.
# For full documentation of all options, run: conclaude config --docs
# Or see the generated documentation from `cargo doc --open`

# Stop hook - runs when Claude is about to stop
stop:
  commands: []
  # Example:
  # - run: "npm test"
  #   showStdout: true
  #   showStderr: true
  #   showCommand: true  # Show "Executing command X/Y: npm test" (default: true)
  #   message: "Tests failed"
  #   maxOutputLines: 100
  #   timeout: 300

  infinite: false
  infiniteMessage: "continue working on the task"

# Subagent stop hook - runs when subagents finish
subagentStop:
  commands: {}
  # Example:
  # coder:
  #   - run: "npm run lint"
  #     showStdout: true
  #     showCommand: true  # Show "Executing command X/Y: npm run lint" (default: true)
  #     message: "Linting failed"
  # test*:
  #   - run: "npm test"
  #     showStderr: true
  #     showCommand: false  # Hide the "Executing command..." line

# Pre-tool-use hook - file protection and tool validation
preToolUse:
  # Prevent files at repository root
  preventRootAdditions: true

  # Protected files (glob patterns)
  # Supports both simple and detailed formats with agent-aware filtering
  uneditableFiles:
    - ".conclaude.yml"
    - ".conclaude.yaml"

  # Examples:
  # Simple format - applies to ALL agents (backward compatible):
  # - "*.lock"

  # Detailed format with custom message:
  # - pattern: ".env*"
  #   message: "Environment files contain secrets"

  # Agent-aware format - protect files for specific agents:
  # - pattern: "spectr/changes/**/tasks.jsonc"
  #   message: "Task files should only be updated by orchestrator"
  #   agent: "coder"  # Only blocks the 'coder' subagent

  # Agent field explanation:
  # - Omitting 'agent' defaults to "*" (all agents including main session)
  # - agent: "*" - Explicitly applies to all agents
  # - agent: "main" - Only applies to main/orchestrator session
  # - agent: "coder" - Only applies to 'coder' subagent
  # - agent: "test*" - Glob pattern matching 'tester', 'test-runner', etc.
  # - agent: "code*" - Matches 'coder', 'coder-v2', etc.

  # More examples:
  # Block subagents from modifying specs (orchestrator can still edit):
  # - pattern: "spectr/specs/**/*.md"
  #   agent: "code*"
  #   message: "Specs should only be modified by orchestrator"

  # Protect test files from coder (allow tester to modify):
  # - pattern: "src/**/*.test.ts"
  #   agent: "coder"
  #   message: "Tests should be created by tester agent"

  # Prevent editing git-ignored files
  preventUpdateGitIgnored: false

  # Tool usage rules
  toolUsageValidation: []
  # Example:
  # - tool: "Write"
  #   pattern: "**/*.js"
  #   action: "allow"
  # - tool: "Bash"
  #   commandPattern: "git push --force*"
  #   action: "block"
  #   message: "Force push not allowed"

  # Directories where additions are prevented
  preventAdditions: []
  # Example: ["dist", "build"]

  # Prevent editing generated files
  preventGeneratedFileEdits: true
  generatedFileMessage: null

# System notifications
notifications:
  enabled: false
  hooks: []  # ["*"] for all, or ["Stop", "PreToolUse"]
  showErrors: false
  showSuccess: false
  showSystemEvents: true

# Permission request hook - auto-approve/deny tools
# Uncomment to enable:
#
# permissionRequest:
#   default: deny  # "allow" or "deny"
#   allow:
#     - "Read"
#     - "Glob"
#     - "Grep"
#     - "Edit"
#     - "Write"
#   deny:
#     - "BashOutput"
#     - "KillShell"

# User prompt submit hook - context injection based on prompt patterns
# Automatically prepends context when prompts match patterns
# Uncomment to enable:
#
# userPromptSubmit:
#   contextRules:
#     # Pattern-based context injection
#     - pattern: "sidebar"
#       prompt: |
#         Make sure to read @.claude/contexts/sidebar.md before proceeding.
#
#     # Multiple patterns with regex alternation
#     - pattern: "auth|login|authentication"
#       prompt: |
#         Review the authentication patterns in @.claude/contexts/auth.md
#
#     # Case-insensitive matching (using regex flag)
#     - pattern: "(?i)database|sql|query"
#       prompt: |
#         Follow the database conventions in @.claude/contexts/database.md
#
#     # Disable a rule temporarily
#     - pattern: "test"
#       prompt: "Run tests before proceeding"
#       enabled: false
#
#     # Explicit case-insensitive flag
#     - pattern: "api"
#       prompt: "Check API documentation first"
#       caseInsensitive: true
